## 开学季毕业慢递接口文档

### 调用方式

```
const prefix = "https://hemc.100steps.net/folder_name/api/method_name"
```

### getInfo

#### 获取用户信息

调用方式：**GET**

#### 返回参数

| 名称   | 类型    | 说明                   |
| ------ | ------- | ---------------------- |
| record | Boolean | 用户信息已填写则返回真 |
| name   | String  | 姓名/昵称              |
| tel    | String  | 手机号                 |

#### 错误信息

`401`：未绑定微信账号

### updateInfo

#### 保存用户信息

调用方式：**POST**

#### 请求参数

| 名称 | 类型   | 必填 | 说明      |
| ---- | ------ | ---- | --------- |
| name | String | 是   | 姓名/昵称 |
| tel  | String | 是   | 手机号    |

#### 返回参数

| 名称    | 类型   | 说明                 |
| ------- | ------ | -------------------- |
| errcode | Int    | 返回0则成功，1则失败 |
| errmsg  | String | 失败时返回错误信息   |

#### 错误信息

`401`：用户未绑定微信

`409`：用户已填写过信息

`400`：手机号不合法

### sendFlag

#### 保存flag

调用方式：**POST**

#### 请求参数

| 名称 | 类型  | 必填 | 说明                         |
| ---- | ----- | ---- | ---------------------------- |
| flag | Array | 是   | 只有一个flag也以数组形式发送 |

#### 返回参数

| 名称    | 类型 | 说明              |
| ------- | ---- | ----------------- |
| errcode | Int  | 返回值为0（成功） |

#### 错误信息

`401`：未绑定微信账号

`409`：已经填写过flag

`404`：用户还未填写姓名和手机号

### getFlag

#### 获取flag

调用方式：**GET**

#### 返回参数

| 名称 | 类型  | 说明     |
| ---- | ----- | -------- |
| flag | Array | 返回数组 |

#### 错误信息

`401`：未绑定微信账号

`404`：没有填写flag

### sendTimeCapsule

#### 保存信件

调用方式：**POST**

#### 请求参数

| 名称    | 类型   | 必填 | 说明              |
| ------- | ------ | ---- | ----------------- |
| type    | String | 是   | `text`或是`voice` |
| message | String | 否   | 文字信件          |
| file_id | String | 否   | 录音id            |
| time    | String | 是   | 毕业时间          |

#### 返回参数

| 名称    | 类型   | 说明                 |
| ------- | ------ | -------------------- |
| errcode | Int    | 返回0则成功，1则失败 |
| errmsg  | String | 失败时返回错误信息   |

#### 错误信息

`401`没有绑定微信账号

`400`没有获取到file_id或者message

`404`服务器上未找到录音文件

`405`用户没有填写姓名手机号



### sendOfflineCapsule

#### 线下寄信

调用方式：**POST**

#### 请求参数

| 名称          | 类型   | 必填 | 说明         |
| ------------- | ------ | ---- | ------------ |
| sender_name   | String | 是   | 寄信人名字   |
| sender_tel    | String | 是   | 寄信人手机号 |
| receiver_name | String | 是   | 收信人名字   |
| receiver_tel  | String | 是   | 收信人手机号 |
| receiver_addr | String | 是   | 收信人地址   |
| capsule_tag   | String | 是   | 取信码       |
| time          | String | 是   | 毕业时间     |

#### 返回参数

| 名称    | 类型 | 说明              |
| ------- | ---- | ----------------- |
| errcode | Int  | 返回值为0（成功） |

#### 错误信息

无

### isOngoing

#### 活动是否结束

调用方式：**GET**

#### 返回参数

| 名称   | 类型 | 说明                                                 |
| ------ | ---- | ---------------------------------------------------- |
| status | Int  | 0表示活动正在进行，1表示活动结束，-1表示活动还未开始 |

#### 错误信息

无

### getDefaultFlag

#### 获取默认flag

调用方式：**GET**

#### 返回参数

| 名称  | 类型  | 说明     |
| ----- | ----- | -------- |
| flags | Array | 返回数组 |

#### 错误信息

无

